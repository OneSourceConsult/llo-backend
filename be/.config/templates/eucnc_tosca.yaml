tosca_definitions_version: tosca_simple_yaml_1_3

description: ssss

metadata:
  # The following fields are "normative" and expected in TOSCA 
  template_name: Cyango Cloud Studio - reimported
  template_author:  cyango-xr-developer
  template_version: ''

imports:
  - charity_custom_types_v08.yaml

topology_template:
  inputs:
    tls_cert:
      type: string
      required: true
      default: -----BEGIN CERTIFICATE-----           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           nqkTZYY20R2Tut7AHSzoevSdQ6VGE46+5fETUg==           -----END CERTIFICATE-----           -----BEGIN CERTIFICATE-----           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           nLRbwHOoq7hHwg==           -----END CERTIFICATE-----           -----BEGIN CERTIFICATE-----           MIIFYDCCBEigAwIBAgIQQAF3ITfU6UK47naqPGQKtzANBgkqhkiG9w0BAQsFADA/           MSQwIgYDVQQKExtEaWdpdGFsIFNpZ25hdHVyZSBUcnVzdCBDby4xFzAVBgNVBAMT           DkRTVCBSb290IENBIFgzMB4XDTIxMDEyMDE5MTQwM1oXDTI0MDkzMDE4MTQwM1ow           TzELMAkGA1UEBhMCVVMxKTAnBgNVBAoTIEludGVybmV0IFNlY3VyaXR5IFJlc2Vh           cmNoIEdyb3VwMRUwEwYDVQQDEwxJU1JHIFJvb3QgWDEwggIiMA0GCSqGSIb3DQEB           AQUAA4ICDwAwggIKAoICAQCt6CRz9BQ385ueK1coHIe+3LffOJCMbjzmV6B493XC           ov71am72AE8o295ohmxEk7axY/0UEmu/H9LqMZshftEzPLpI9d1537O4/xLxIZpL           wYqGcWlKZmZsj348cL+tKSIG8+TA5oCu4kuPt5l+lAOf00eXfJlII1PoOK5PCm+D           LtFJV4yAdLbaL9A4jXsDcCEbdfIwPPqPrt3aY6vrFk/CjhFLfs8L6P+1dy70sntK           4EwSJQxwjQMpoOFTJOwT2e4ZvxCzSow/iaNhUd6shweU9GNx7C7ib1uYgeGJXDR5           bHbvO5BieebbpJovJsXQEOEO3tkQjhb7t/eo98flAgeYjzYIlefiN5YNNnWe+w5y           sR2bvAP5SQXYgd0FtCrWQemsAXaVCg/Y39W9Eh81LygXbNKYwagJZHduRze6zqxZ           Xmidf3LWicUGQSk+WT7dJvUkyRGnWqNMQB9GoZm1pzpRboY7nn1ypxIFeFntPlF4           FQsDj43QLwWyPntKHEtzBRL8xurgUBN8Q5N0s8p0544fAQjQMNRbcTa0B7rBMDBc           SLeCO5imfWCKoqMpgsy6vYMEG6KDA0Gh1gXxG8K28Kh8hjtGqEgqiNx2mna/H2ql           PRmP6zjzZN7IKw0KKP/32+IVQtQi0Cdd4Xn+GOdwiK1O5tmLOsbdJ1Fu/7xk9TND           TwIDAQABo4IBRjCCAUIwDwYDVR0TAQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAQYw           SwYIKwYBBQUHAQEEPzA9MDsGCCsGAQUFBzAChi9odHRwOi8vYXBwcy5pZGVudHJ1           c3QuY29tL3Jvb3RzL2RzdHJvb3RjYXgzLnA3YzAfBgNVHSMEGDAWgBTEp7Gkeyxx           +tvhS5B1/8QVYIWJEDBUBgNVHSAETTBLMAgGBmeBDAECATA/BgsrBgEEAYLfEwEB           ATAwMC4GCCsGAQUFBwIBFiJodHRwOi8vY3BzLnJvb3QteDEubGV0c2VuY3J5cHQu           b3JnMDwGA1UdHwQ1MDMwMaAvoC2GK2h0dHA6Ly9jcmwuaWRlbnRydXN0LmNvbS9E           U1RST09UQ0FYM0NSTC5jcmwwHQYDVR0OBBYEFHm0WeZ7tuXkAXOACIjIGlj26Ztu           MA0GCSqGSIb3DQEBCwUAA4IBAQAKcwBslm7/DlLQrt2M51oGrS+o44+/yQoDFVDC           5WxCu2+b9LRPwkSICHXM6webFGJueN7sJ7o5XPWioW5WlHAQU7G75K/QosMrAdSW           9MUgNTP52GE24HGNtLi1qoJFlcDyqSMo59ahy2cI2qBDLKobkx/J3vWraV0T9VuG           WCLKTVXkcGdtwlfFRjlBz4pYg1htmf5X6DYO8A4jqv2Il9DjXA6USbW1FzXSLr9O           he8Y4IWS6wY7bCkjCWDcRQJMEhg76fsO3txE+FiYruq9RUWhiF1myv4Q6W+CyBFC           Dfvp7OOGAN6dEOM4+qR9sdjoSYKEBpsr6GtPAQw4dy753ec5           -----END CERTIFICATE-----
    tls_key:
      type: string
      required: true
      default: -----BEGIN PRIVATE KEY-----           MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC3Fy6uy9CNG2zk           uKwcR0jNRWWEsA3IfsqxQW1f+dCo9MbD8LDcmw/+aVew0T70Ub7weG5lef9tR1D3           KJ5XzLredsPlGEUy5KEjigKRcfi4xKB4HjhaJ8uR5qknkB6UtMtkYQJOGXmax8cG           ElW0BRh6hTwEyyx2GWTllLbIBc7XA3YkD1EL8LNIuD72PcCx5jaZJ9RSq/v4wpP5           cjSVfE5jrG8KB2IdkL3Ro3u43LeERjvMpPuYuJ3kWcMCfgkxRzIPnAXqUhWDFr+Q           J+49yhwDkMxt1uVxVJkLkcG+pDajcHnNxNxsLKjPN0SL9Yzl5mFrGHC7iKSy+rNk           rm/ODOf1AgMBAAECggEBAKdPF+nDdiB8H1YjK6PrwCtUbyCBgRbmRnMURs6din/a           rof/Op9dU5A401lQ3SaGTOWSJ8+zXCaQNPymsYuqGlmQThLbyuBm7Jl9VDt02sR9           aeZaN0SreOsqzQjKOifJztM7ks+rl+RJCyYROx/2SBguCFqZD1gcfIcPDrhaFlmD           0n0gX10PiLXSUCxIypx1s/yIYsV/lDLvQav5qjSNKpTVNchPlwU/ZbZUI/eGnXyT           9ysqRTFV86xwbCMnUfyM9hijq5I1eAQEbk//Y02QOG0WeK/EHGrGx27WQVNsUdUk           CXWuIlnlNqD8TQDYzXiC5A0jo4iphg0/tYdxw6JWgAECgYEA7+sBNr5L/sYEqTaH           ycqr2Ar2rlKJoElYTso+LMAKiAVlNoC7LBR3jCkjfrA2OouG0DD7vMXD7bwfb1ji           s5JqcJxnG1ktAcB4PMS8W65U76wPLiptDUO/f65AoibawXny9/r8xdLriYzi+qBf           arAgJh6XI6fOi/FqYmgHh04wVfUCgYEAw10ErejENdJD8JUhlnHcqs45ftqTX14l           2zGMcCSLkDEAhiyrNrLk5NOu3OgvqnC0h5XF5q66Qggzp+i4T8pdmWpXkv9BWUbX           Myon/Bsal/AHyIEea/ukEWgiEUHTSLMTF227Dxv99OWBcAcxZV4gHdIdX8O32F47           BElKdcjdCgECgYAxI5IBE2LfUNF9kvSm6QLfYgd6Vt9nW/5hTN0FL2Q4zdoYGq+7           bIm7xGVHunGw9gjrtUyqMltZ4vERTkRIgVGZtP8NQ+uK80/tKmJl6MPuvu/xBbGG           SPz8+sS0MX8Wp5KTJe4F2phxeNC4goZohKBhDlzoaaNNWGnws9vu453UzQKBgCWQ           62dtjN00k2/dnVnKhz4o7ZFhAlmiRvFBM9oUjOmrIoiqajnYaH8/3S4JT7Ecfvpb           aHSVQKeV4Cj3bQmaxijL9A8GGlDKeHMUNiAaLiDtPPHnMixddQ0L0xEycShXluI4           bXHYVhsTTrJ2D5+IW/CgCJnzjpSCeiK23SSM/UQBAoGAYzJX/wsj93Gl+Jbol5fZ           qQ7f73nXIY12Cvm5d2KrOeLYE+Ce6gliEoPjBZfDMk7tDHOTjHMZ6opUlnXWeMMg           QmLNyOcndwU5sX/0j/TSkeFjNjgbZy4R2SiGduswv0vgpU6PAcDGaqtAOQcTFtmf           NOANWzT6zBZR1CpgXqqd/CQ=           -----END PRIVATE KEY-----
    NODE_ENV:
      type: string
      required: true
      default: beta
  node_templates:
    charity-kafka:
      type: Charity.Component
      properties:
        name: charity-kafka
        deployment_unit: EXTERNAL
    AmazonS3:
      type: Charity.Component
      properties:
        name: amazons3
        deployment_unit: EXTERNAL
    cyango-backend:
      type: Charity.Component
      properties:
        name: cyango-backend
        deployment_unit: K8S_POD
        placement_hint: CLOUD
        image: repository.charity-project.eu/dotes/cyango-backend:beta
        environment:
          NODE_ENV: { get_input: NODE_ENV } 
      requirements:
        - host: cyango-backendNode
    cyango-backendNode:
      type: Charity.Node
      node_filter:
        capabilities:
          - host:
              properties:
                num_cpus: 
                  - equal: 0 
                mem_size: 
                  - greater_than: 0 MB
 
    cyango-database:
      type: Charity.Component
      properties:
        name: cyango-database
        deployment_unit: K8S_POD
        geolocation: { get_input: null } 
        placement_hint: CLOUD
        image: repository.charity-project.eu/dotes/cyango-database:beta
        environment:
          MONGO_INITDB_PWD: PUkkwM7sgPYZgGZc7sTkSBnGixNhvbfM          
          MONGO_INITDB_USER: cyadmin          
          MONGO_INITDB_DATABASE: cyango_database_beta          
      requirements:
        - host: cyango-databaseNode
    cyango-databaseNode:
      type: Charity.Node
      node_filter:
        capabilities:
          - host:
              properties:
                num_cpus: 
                  - equal: 0 
                mem_size: 
                  - greater_than: 0 MB
 
    cyango-cloud-editor:
      type: Charity.Component
      properties:
        name: cyango-cloud-editor
        deployment_unit: K8S_POD
        placement_hint: CLOUD
        image: repository.charity-project.eu/dotes/cyango-cloud-editor:beta
        environment:
          NODE_ENV: { get_input: NODE_ENV } 
      requirements:
        - host: cyango-cloud-editorNode
    cyango-cloud-editorNode:
      type: Charity.Node
      node_filter:
        capabilities:
          - host:
              properties:
                num_cpus: 
                  - equal: 0 
                mem_size: 
                  - greater_than: 0 MB
 
    cyango-story:
      type: Charity.Component
      properties:
        name: cyango-story
        deployment_unit: K8S_POD
        placement_hint: CLOUD
        image: repository.charity-project.eu/dotes/cyango-story-express:beta
        environment:
          NODE_ENV: { get_input: NODE_ENV } 
      requirements:
        - host: cyango-storyNode
    cyango-storyNode:
      type: Charity.Node
      node_filter:
        capabilities:
          - host:
              properties:
                num_cpus: 
                  - equal: 0 
                mem_size: 
                  - greater_than: 0 MB
 
    cyango-worker:
      type: Charity.Component
      properties:
        name: cyango-worker
        deployment_unit: K8S_POD
        placement_hint: CLOUD
        image: repository.charity-project.eu/dotes/cyango-worker:beta
        environment:
          NODE_ENV: { get_input: NODE_ENV } 
      requirements:
        - host: cyango-workerNode
    cyango-workerNode:
      type: Charity.Node
      node_filter:
        capabilities:
          - host:
              properties:
                num_cpus: 
                  - equal: 0 
                mem_size: 
                  - greater_than: 0 MB
 
    VL1:
      type: Charity.VirtualLink
      properties:
        name: VL1
      node_filter:
        capabilities:
        - network:
            properties:
              bandwidth:
                - greater_or_equal: 50 Kbps            
              latency:
                - less_than: 5 ms
              jitter:
                - less_than: 100 ms
    VL2:
      type: Charity.VirtualLink
      properties:
        name: VL2
      node_filter:
        capabilities:
        - network:
            properties:
              bandwidth:
                - greater_or_equal: 0 Mbps            
              latency:
                - less_than: 10000 ms
              jitter:
                - less_than: 100 ms
    VL3:
      type: Charity.VirtualLink
      properties:
        name: VL3
      node_filter:
        capabilities:
        - network:
            properties:
              bandwidth:
                - greater_or_equal: 0 Mbps            
              latency:
                - less_than: 110 ms
              jitter:
                - less_than: 100 ms
    VL4:
      type: Charity.VirtualLink
      properties:
        name: VL4
      node_filter:
        capabilities:
        - network:
            properties:
              bandwidth:
                - greater_or_equal: 0 Mbps            
              latency:
                - less_than: 10000 ms
              jitter:
                - less_than: 100 ms
    VL5:
      type: Charity.VirtualLink
      properties:
        name: VL5
      node_filter:
        capabilities:
        - network:
            properties:
              bandwidth:
                - greater_or_equal: 0 Mbps            
              latency:
                - less_than: 10000 ms
              jitter:
                - less_than: 100 ms
    VL6:
      type: Charity.VirtualLink
      properties:
        name: VL6
      node_filter:
        capabilities:
        - network:
            properties:
              bandwidth:
                - greater_or_equal: 0 Mbps            
              latency:
                - less_than: 10000 ms
              jitter:
                - less_than: 100 ms
    VL7:
      type: Charity.VirtualLink
      properties:
        name: VL7
      node_filter:
        capabilities:
        - network:
            properties:
              bandwidth:
                - greater_or_equal: 0 Mbps            
              latency:
                - less_than: 10000 ms
              jitter:
                - less_than: 100 ms
    VL8:
      type: Charity.VirtualLink
      properties:
        name: VL8
      node_filter:
        capabilities:
        - network:
            properties:
              bandwidth:
                - greater_or_equal: 0 Mbps            
              latency:
                - less_than: 10000 ms
              jitter:
                - less_than: 100 ms
    CH-KAFKA:
      type: Charity.ConnectionPoint
      properties:
        name: CH-KAFKA
        port: 9092
        protocol: TCP
      requirements:
        - binding:
            node: charity-kafka
        - link: 
            node: VL1
        - link:         
            node: VL3
    CY_BACK:
      type: Charity.ConnectionPoint
      properties:
        name: CY_BACK
        port: 32777
        protocol: TCP
      requirements:
        - binding:
            node: cyango-backend
        - link: 
            node: VL1
        - link: 
            node: VL2
        - link: 
            node: VL4
        - link: 
            node: VL5            
        - link: 
            node: VL6            
    AWS-S3:
      type: Charity.ConnectionPoint
      properties:
        name: AWS-S3
        protocol: TCP
      requirements:
        - binding:
            node: AmazonS3
        - link: 
            node: VL2
        - link: 
            node: VL7
        - link: 
            node: VL8
    CY_WORKER:
      type: Charity.ConnectionPoint
      properties:
        name: CY_WORKER
        protocol: TCP
      requirements:
        - binding:
            node: cyango-worker
        - link: 
            node: VL3
    CY_DB:
      type: Charity.ConnectionPoint
      properties:
        name: CY_DB
        port: 27017
        protocol: TCP
      requirements:
        - binding:
            node: cyango-database
        - link: 
            node: VL4
    CY_CLOUD_EDITOR:
      type: Charity.ConnectionPoint
      properties:
        name: CY_CLOUD_EDITOR
        port: 443
        protocol: TCP
      requirements:
        - binding:
            node: cyango-cloud-editor
        - link: 
            node: VL5
        - link: 
            node: VL7
    CY_STORY:
      type: Charity.ConnectionPoint
      properties:
        name: CY_STORY
        port: 443
        protocol: TCP
      requirements:
        - binding:
            node: cyango-story
        - link: 
            node: VL6
        - link: 
            node: VL8
